(this["webpackJsonpml5-examples"]=this["webpackJsonpml5-examples"]||[]).push([[0],{21:function(t,e,n){t.exports=n(33)},26:function(t,e,n){},27:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(18),s=n.n(o),r=(n(26),n(9)),c=n(10),l=n(12),h=n(11),d=(n(27),n(8)),p=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).webCam=void 0,i.camCanvas=void 0,i.stream=void 0,i.poseNet=void 0,i.HEIGHT=void 0,i.WIDTH=void 0,i.ctx=void 0,i.poses=void 0,i.modelLoaded=void 0,i.lastAngleData=null,i.findElementPoints=function(t,e,n,a){if(!a||!Array.isArray(a))return null;var o,s=a.find((function(e){return e.part===t})),r=a.find((function(t){return t.part===e})),c=a.find((function(t){return t.part===n})),l=null;s&&r&&c&&(o={},Object(d.a)(o,t,s),Object(d.a)(o,e,r),Object(d.a)(o,n,c),Object(d.a)(o,"angle",i.findAngle(s.position,r.position,c.position)),l=o);return l},i.findAngle=function(t,e,n){var a=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),i=Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2),o=Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2);return Math.acos((a+i-o)/Math.sqrt(4*a*i))},i.webCam=a.createRef(),i.camCanvas=a.createRef(),i.HEIGHT=700,i.WIDTH=1e3,i.modelLoaded=!1,i.state={detected:!1},i}return Object(c.a)(n,[{key:"initializeModel",value:function(){var t=this;this.poseNet=ml5.poseNet(this.webCam.current,{flipHorizontal:!1,maxPoseDetections:1,scoreThreshold:.9},(function(){console.log("Model Initilaized"),t.modelLoaded=!0,t.poseNet.on("pose",(function(e){t.poses=e,t.setState({detected:void 0!==e&&e.length>0})}))}))}},{key:"drawKeypoints",value:function(){for(var t=0;t<this.poses.length;t++){var e=null;this.poses[t].pose.keypoints&&((e=this.findElementPoints("leftShoulder","leftWrist","leftElbow",this.poses[t].pose.keypoints))&&(this.lastAngleData=e),e=e||this.lastAngleData);for(var n=0;n<this.poses[t].pose.keypoints.length;n++){var a=this.poses[t].pose.keypoints[n];a.score>.3&&("leftElbow"===a.part?(this.ctx.fillStyle="#ff5736",this.ctx.font="30px Arial",e?this.ctx.fillText("".concat(a.part," - ").concat(Math.round(100*e.angle),"*"),a.position.x,a.position.y):this.ctx.fillText(a.part,a.position.x,a.position.y)):(this.ctx.fillStyle="#349eeb",this.ctx.font="18px Arial",this.ctx.fillText(a.part,a.position.x,a.position.y)),this.ctx.beginPath(),this.ctx.arc(a.position.x,a.position.y,5,0,2*Math.PI),this.ctx.fill())}}}},{key:"drawSkeleton",value:function(){var t=this;this.poses.map((function(e){e.skeleton.map((function(e){var n=e[0],a=e[1];t.ctx.beginPath(),t.ctx.moveTo(n.position.x,n.position.y),t.ctx.lineTo(a.position.x,a.position.y),t.ctx.stroke()}))}))}},{key:"drawCameraIntoCanvas",value:function(){this.modelLoaded&&this.ctx.drawImage(this.webCam.current,0,0,this.WIDTH,this.HEIGHT),void 0!==this.poses&&(this.drawKeypoints(),this.drawSkeleton()),requestAnimationFrame(this.drawCameraIntoCanvas.bind(this))}},{key:"componentDidMount",value:function(){var t=this;if(this.ctx=this.camCanvas.current.getContext("2d"),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:this.WIDTH,height:this.HEIGHT,frameRate:15}}).then((function(e){var n;null!=e&&(t.stream=e,t.webCam.current.srcObject=t.stream,null===(n=t.webCam.current)||void 0===n||n.play(),t.drawCameraIntoCanvas(),t.initializeModel())}))}},{key:"componentWillUnmount",value:function(){this.stream&&this.stream.getTracks().forEach((function(t){return t.stop()}))}},{key:"render",value:function(){return a.createElement("div",{className:"container"},a.createElement("canvas",{ref:this.camCanvas,width:this.WIDTH,height:this.HEIGHT}),a.createElement("video",{playsInline:!0,ref:this.webCam,width:this.WIDTH,height:this.HEIGHT,style:{display:"none"}}),this.state.detected?"Found You!!!":"Show yourself")}}]),n}(a.Component),u=n(19),m=n(1),f=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement(u.a,null,i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"app-body"},i.a.createElement(m.c,null,i.a.createElement(m.a,{path:"/",exact:!0,component:p})))))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.c89ac022.chunk.js.map